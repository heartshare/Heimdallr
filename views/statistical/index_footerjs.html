<script type="text/javascript">

    $(function () {
        /*时间显示脚本 */
        var curTime = {{.Info.Timer}};
        var week_info = null
        var date = new Date(Date.parse(curTime));
        // 时间run
        function changeTime() {
            date.setSeconds(date.getSeconds()+1);
            var week = date.getDay();
            switch (week) {
                case 0:
                    week_info = "星期日";
                    break;
                case 1:
                    week_info = "星期一";
                    break;
                case 2:
                    week_info = "星期二";
                    break;
                case 3:
                    week_info = "星期三";
                    break;
                case 4:
                    week_info = "星期四";
                    break;
                case 5:
                    week_info = "星期五";
                    break;
                case 6:
                    week_info = "星期六";
            };
            document.getElementById("time").innerHTML = date.toLocaleString() +"&nbsp&nbsp&nbsp&nbsp"+ week_info
        };
        setInterval(changeTime,1000);

        // 根据环境自动加载各个环境的bifrost状态
        $.get({{urlfor "StatisticalController.Bifrost"}},function (res) {
           $.each(res,function (i,item) {
                if (item["Enable"] === 1) {
                    if (item["status"] === "TimeOut") {item["Env"]+=item["status"]}
                    var el = $('<div class="col-md-3">\n<div class="card card-widget widget-user-2">\n' +
                        '<div class="widget-user-header bg-aqua-active">\n' +
                        '<h3>Bifrost: '+item["Env"]+'</h3>\n\<p>版本: '+item["message"]["bifrost_version"]+'</p></div>\n' +
                        '<div class="card-footer p-1">\n<ul class="nav flex-column">\n' +
                        '<li class="nav-item">\n<a href="#" class="nav-link">\n时间 <span id="time" class="pull-right label bg-blue ">'+item["message"]["time"]+'</span>\n</a>\n</li>\n' +
                        '<li class="nav-item">\n<a href="#" class="nav-link">\n系统 <span class="pull-right label bg-blue">'+item["message"]["system"]+'</span>\n</a>\n</li>\n' +
                        '<li class="nav-item">\n<a href="#" class="nav-link">\nCPU <span class="pull-right label bg-green">'+item["message"]["cpu"]+'%</span>\n</a>\n</li>\n' +
                        '<li class="nav-item">\n<a href="#" class="nav-link">\n内存 <span class="pull-right label bg-yellow">'+item["message"]["mem"]+'%</span>\n</a>\n</li>\n' +
                        '<li class="nav-item">\n<a href="#" class="nav-link">\n磁盘 <span class="pull-right label bg-red">'+item["message"]["disk"]+'%</span>\n</a>\n</li>\n</ul>\n</div>\n</div>\n</div>')
                    el.appendTo($('#sysinfobox'))
                }
            })
        });
    })


</script>
<!-- 显示nginxconf配置统计信息 -->